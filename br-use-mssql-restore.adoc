---
sidebar: sidebar 
permalink: br-use-mssql-restore.html 
keywords: backing up, restoring, back up, backup, restore, cloud volumes ontap, aws, azure, s3, blob, google cloud, storagegrid, back up volumes, cloud backup, restore volumes, cost, on-premises ontap, onprem, applications, virtual machines, backup and recovery 
summary: 'Ripristina i carichi di lavoro del database da una copia snapshot, da un backup del carico di lavoro replicato su un archivio secondario o da backup archiviati nell"archivio oggetti.' 
---
= Ripristina i carichi di lavoro di Microsoft SQL Server con NetApp Backup and Recovery
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Ripristina i carichi di lavoro di Microsoft SQL Server utilizzando NetApp Backup and Recovery.  Utilizzare copie snapshot, backup replicati su storage secondario o backup in storage a oggetti.  Ripristinare i carichi di lavoro sul sistema originale, su un sistema diverso con lo stesso account cloud o su un sistema ONTAP locale.

.Ripristina da queste posizioni
È possibile ripristinare i carichi di lavoro da diverse posizioni di partenza:

* Ripristina da una posizione primaria
* Ripristina da una risorsa replicata
* Ripristina da un backup dell'archivio oggetti


.Ripristinare questi punti
È possibile ripristinare i dati all'ultimo snapshot o a questi punti:

* Ripristina da snapshot
* Ripristina un punto specifico nel tempo se conosci il nome del file, la posizione e l'ultima data valida
* Ripristina l'ultimo backup


.Considerazioni sul ripristino da storage di oggetti
Se selezioni un file di backup nell'archiviazione oggetti e Ransomware Resilience è attivo per quel backup (se hai abilitato DataLock e Ransomware Resilience nel criterio di backup), ti verrà richiesto di eseguire un ulteriore controllo di integrità sul file di backup prima di ripristinare i dati.  Ti consigliamo di eseguire la scansione.


TIP: Per accedere al file di backup dovrai pagare delle commissioni aggiuntive al tuo provider cloud.



== Come funziona il ripristino dei carichi di lavoro

Quando si ripristinano i carichi di lavoro, si verifica quanto segue:

* Quando si ripristina un carico di lavoro da un file di backup, NetApp Backup and Recovery crea una _nuova_ risorsa utilizzando i dati del backup.
* Quando si esegue il ripristino da un carico di lavoro replicato, è possibile ripristinare il carico di lavoro sul sistema originale o su un sistema ONTAP locale.
+
image:diagram_browse_restore_volume-unified.png["Un diagramma che mostra il flusso per ripristinare una risorsa"]

* Quando si ripristina un backup da un archivio di oggetti, è possibile ripristinare i dati nel sistema originale o in un sistema ONTAP locale.




== Metodi di ripristino

Ripristinare i carichi di lavoro utilizzando uno di questi metodi:

* *Dalla pagina Ripristina*: usa questa opzione per ripristinare una risorsa quando non ne conosci il nome, la posizione o l'ultima data valida.  Cerca l'istantanea utilizzando i filtri.
* *Dalla pagina Inventario*: usa questa opzione per ripristinare una risorsa specifica quando ne conosci il nome, la posizione e l'ultima data di validità.  Sfoglia l'elenco per trovare la risorsa.


*Ruolo di NetApp Console obbligatorio* Ruolo di visualizzatore di storage, super amministratore di backup e ripristino o amministratore di backup di backup e ripristino. https://docs.netapp.com/us-en/console-setup-admin/reference-iam-predefined-roles.html["Scopri di più sui ruoli di accesso NetApp Console per tutti i servizi"^] .



== Ripristina i dati del carico di lavoro dall'opzione Ripristina

Ripristinare i carichi di lavoro del database utilizzando l'opzione Ripristina.

.Passi
. Dal menu NetApp Backup and Recovery , selezionare *Ripristina*.
. Selezionare il database che si desidera ripristinare.  Utilizza i filtri per effettuare la ricerca.
. Seleziona l'opzione di ripristino:
+
** Ripristina da snapshot
** Ripristina un punto specifico nel tempo se conosci il nome del file, la posizione e l'ultima data valida
** Ripristina l'ultimo backup






=== Ripristinare i carichi di lavoro dagli snapshot

. Proseguendo dalla pagina Opzioni di ripristino, seleziona *Ripristina da snapshot*.
+
Viene visualizzato un elenco di istantanee.

. Seleziona lo snapshot che vuoi ripristinare.
. Selezionare *Avanti*.
+
Successivamente vedrai le opzioni di destinazione.

. Nella pagina Dettagli destinazione, inserisci le seguenti informazioni:
+
** *Impostazioni di destinazione*: scegli se desideri ripristinare i dati nella posizione originale o in una posizione alternativa.  Per una posizione alternativa, seleziona il nome host e l'istanza, immetti il nome del database e il percorso di destinazione in cui desideri ripristinare lo snapshot.
** *Opzioni pre-ripristino*:
+
*** *Sovrascrivi il database con lo stesso nome durante il ripristino*: durante il ripristino, il nome originale del database viene mantenuto.
*** *Mantieni impostazioni di replica del database SQL*: conserva le impostazioni di replica per il database SQL dopo l'operazione di ripristino.
*** *Crea backup del registro delle transazioni prima del ripristino*: crea un backup del registro delle transazioni prima dell'operazione di ripristino.***  *Interrompi il ripristino se il backup del registro delle transazioni prima del ripristino non riesce*: interrompe l'operazione di ripristino se il backup del registro delle transazioni non riesce.
*** *Prescript*: immettere il percorso completo di uno script che deve essere eseguito prima dell'operazione di ripristino, eventuali argomenti richiesti dallo script e il tempo di attesa per il completamento dello script.


** *Opzioni post-ripristino*:
+
*** *Operativo*, ma non disponibile per il ripristino di ulteriori registri delle transazioni.  In questo modo il database torna online dopo l'applicazione dei backup del registro delle transazioni.
*** *Non operativo*, ma disponibile per il ripristino di ulteriori registri delle transazioni.  Mantiene il database in uno stato non operativo dopo l'operazione di ripristino durante il ripristino dei backup del registro delle transazioni.  Questa opzione è utile per ripristinare ulteriori registri delle transazioni.
*** *Modalità di sola lettura* e disponibile per il ripristino di registri di transazioni aggiuntivi.  Ripristina il database in modalità di sola lettura e applica i backup del registro delle transazioni.
*** *Postscript*: immettere il percorso completo di uno script che deve essere eseguito dopo l'operazione di ripristino e tutti gli argomenti accettati dallo script.




. Selezionare *Ripristina*.




=== Ripristinare un punto specifico nel tempo

NetApp Backup and Recovery utilizza i log e gli snapshot più recenti per creare un ripristino puntuale dei dati.

. Proseguendo dalla pagina Opzioni di ripristino, seleziona *Ripristina in un momento specifico*.
. Selezionare *Avanti*.
. Nella pagina Ripristina a un punto specifico nel tempo, immettere le seguenti informazioni:
+
** *Data e ora del ripristino dei dati*: immettere la data e l'ora esatte dei dati che si desidera ripristinare.  Questa data e ora provengono dall'host del database Microsoft SQL Server.


. Seleziona *Cerca*.
. Seleziona lo snapshot che vuoi ripristinare.
. Selezionare *Avanti*.
. Nella pagina Dettagli destinazione, inserisci le seguenti informazioni:
+
** *Impostazioni di destinazione*: scegli se desideri ripristinare i dati nella posizione originale o in una posizione alternativa.  Per una posizione alternativa, seleziona il nome host e l'istanza, inserisci il nome del database e inserisci il percorso di destinazione.
** *Opzioni pre-ripristino*:
+
*** *Mantieni il nome originale del database*: durante il ripristino, il nome originale del database viene mantenuto.
*** *Mantieni impostazioni di replica del database SQL*: conserva le impostazioni di replica per il database SQL dopo l'operazione di ripristino.
*** *Prescript*: immettere il percorso completo di uno script che deve essere eseguito prima dell'operazione di ripristino, eventuali argomenti richiesti dallo script e il tempo di attesa per il completamento dello script.


** *Opzioni post-ripristino*:
+
*** *Operativo*, ma non disponibile per il ripristino di ulteriori registri delle transazioni.  In questo modo il database torna online dopo l'applicazione dei backup del registro delle transazioni.
*** *Non operativo*, ma disponibile per il ripristino di ulteriori registri delle transazioni.  Mantiene il database in uno stato non operativo dopo l'operazione di ripristino durante il ripristino dei backup del registro delle transazioni.  Questa opzione è utile per ripristinare ulteriori registri delle transazioni.
*** *Modalità di sola lettura* e disponibile per il ripristino di registri di transazioni aggiuntivi.  Ripristina il database in modalità di sola lettura e applica i backup del registro delle transazioni.
*** *Postscript*: immettere il percorso completo di uno script che deve essere eseguito dopo l'operazione di ripristino e tutti gli argomenti accettati dallo script.




. Selezionare *Ripristina*.




=== Ripristina l'ultimo backup

Questa opzione utilizza gli ultimi backup completi e di registro per ripristinare i dati all'ultimo stato valido.  Il sistema esegue la scansione dei registri dall'ultimo snapshot fino al presente.  Il processo tiene traccia delle modifiche e delle attività per ripristinare la versione più recente e accurata dei dati.

. Proseguendo dalla pagina Opzioni di ripristino, seleziona *Ripristina all'ultimo backup*.
+
NetApp Backup and Recovery mostra gli snapshot disponibili per l'operazione di ripristino.

. Nella pagina Ripristina allo stato più recente, seleziona la posizione dello snapshot dell'archiviazione locale, secondaria o dell'archiviazione oggetti.
. Selezionare *Avanti*.
. Nella pagina Dettagli destinazione, inserisci le seguenti informazioni:
+
** *Impostazioni di destinazione*: scegli se desideri ripristinare i dati nella posizione originale o in una posizione alternativa.  Per una posizione alternativa, seleziona il nome host e l'istanza, inserisci il nome del database e inserisci il percorso di destinazione.
** *Opzioni pre-ripristino*:
+
*** *Sovrascrivi il database con lo stesso nome durante il ripristino*: durante il ripristino, il nome originale del database viene mantenuto.
*** *Mantieni impostazioni di replica del database SQL*: conserva le impostazioni di replica per il database SQL dopo l'operazione di ripristino.
*** *Crea backup del registro delle transazioni prima del ripristino*: crea un backup del registro delle transazioni prima dell'operazione di ripristino.
*** *Interrompi il ripristino se il backup del registro delle transazioni prima del ripristino fallisce*: interrompe l'operazione di ripristino se il backup del registro delle transazioni fallisce.
*** *Prescript*: immettere il percorso completo di uno script che deve essere eseguito prima dell'operazione di ripristino, eventuali argomenti richiesti dallo script e il tempo di attesa per il completamento dello script.


** *Opzioni post-ripristino*:
+
*** *Operativo*, ma non disponibile per il ripristino di ulteriori registri delle transazioni.  In questo modo il database torna online dopo l'applicazione dei backup del registro delle transazioni.
*** *Non operativo*, ma disponibile per il ripristino di ulteriori registri delle transazioni.  Mantiene il database in uno stato non operativo dopo l'operazione di ripristino durante il ripristino dei backup del registro delle transazioni.  Questa opzione è utile per ripristinare ulteriori registri delle transazioni.
*** *Modalità di sola lettura* e disponibile per il ripristino di registri di transazioni aggiuntivi.  Ripristina il database in modalità di sola lettura e applica i backup del registro delle transazioni.
*** *Postscript*: immettere il percorso completo di uno script che deve essere eseguito dopo l'operazione di ripristino e tutti gli argomenti accettati dallo script.




. Selezionare *Ripristina*.




== Ripristina i dati del carico di lavoro dall'opzione Inventario

Ripristina i carichi di lavoro del database dalla pagina Inventario.  Utilizzando l'opzione Inventario, è possibile ripristinare solo i database, non le istanze.

.Passi
. Dal menu NetApp Backup and Recovery , selezionare *Inventario*.
. Selezionare l'host in cui si trova la risorsa che si desidera ripristinare.
. Seleziona *Azioni*image:icon-action.png["Icona Azioni"] icona e seleziona *Visualizza dettagli*.
. Nella pagina Microsoft SQL Server, selezionare la scheda *Database*.
. Nel menu Database, seleziona un database con stato "Protetto".
. Seleziona *Azioni*image:icon-action.png["Icona Azioni"] icona e seleziona *Ripristina*.
+
Vengono visualizzate le stesse tre opzioni presenti quando si esegue il ripristino dalla pagina Ripristina:

+
** Ripristina da snapshot
** Ripristinare un punto specifico nel tempo
** Ripristina l'ultimo backup


. Continuare con gli stessi passaggi per l'opzione di ripristino dalla pagina Ripristina


ifdef::aws[]

endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

endif::gcp[]

ifdef::aws[]

endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

endif::gcp[]
